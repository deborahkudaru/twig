{% extends "layout/dashboard_base.twig" %}

{% block content %}
<div class="p-4 sm:p-6 lg:p-8 min-h-screen">
  <div class="flex flex-col sm:flex-row sm:items-center justify-between mb-6 sm:mb-8 gap-4">
    <div>
      <h1 class="text-2xl sm:text-3xl font-bold text-gray-900">Tickets</h1>
    </div>
    <a 
      href="/tickets/new" 
      class="bg-slate-600 hover:bg-slate-700 text-white px-4 sm:px-6 py-2.5 sm:py-3 rounded-lg font-medium transition-colors duration-200 text-sm sm:text-base whitespace-nowrap"
    >
      + Create Ticket
    </a>
  </div>

  {% if error %}
    <div class="bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg mb-6">
      {{ error }}
    </div>
  {% endif %}

  {% if tickets is empty %}
    <div class="text-center py-12">
      <div class="text-5xl sm:text-6xl mb-4">ðŸŽ«</div>
      <h3 class="text-lg sm:text-xl font-semibold text-gray-900 mb-2">No tickets found</h3>
      <p class="text-sm sm:text-base text-gray-600 mb-6 px-4">Get started by creating your first ticket</p>
      <a 
        href="/tickets/new"
        class="bg-slate-600 hover:bg-slate-700 text-white px-5 sm:px-6 py-2.5 sm:py-3 rounded-lg font-medium transition-colors duration-200 text-sm sm:text-base"
      >
        Create Your First Ticket
      </a>
    </div>
  {% else %}
    <div class="grid gap-4 sm:gap-6 grid-cols-1 md:grid-cols-2 xl:grid-cols-3">
      {% for t in tickets %}
        <div class="bg-white p-4 sm:p-6 rounded-xl shadow-sm border border-gray-200 hover:shadow-md transition-shadow">
          <div class="flex justify-between items-start mb-3 sm:mb-4 gap-2">
            <h3 class="font-semibold text-gray-900 text-base sm:text-lg pr-2">{{ t.title }}</h3>
            <span class="
              inline-flex items-center justify-center px-2 py-1 text-xs font-medium rounded-full
              {% if t.status == 'open' %} bg-green-100 text-green-700
              {% elseif t.status == 'closed' %} bg-blue-100 text-blue-700
              {% else %} bg-gray-100 text-gray-700 {% endif %}
            ">
              {{ t.status|capitalize }}
            </span>
          </div>

          <p class="text-gray-600 text-sm mb-3 sm:mb-4 leading-relaxed">
            {{ t.description|slice(0, 60) }}{% if t.description|length > 60 %}...{% endif %}
          </p>

          <div class="flex flex-col sm:flex-row sm:justify-between sm:items-center pt-3 sm:pt-4 border-t border-gray-100 gap-3 sm:gap-0">
            <div class="flex space-x-3">
              <a 
                href="/tickets/edit/{{ t.id }}"
                class="text-slate-600 hover:text-slate-800 font-medium text-sm transition-colors"
              >
                Edit
              </a>
              <a 
                href="/tickets/delete/{{ t.id }}"
                class="text-red-600 hover:text-red-800 font-medium text-sm transition-colors"
                onclick="return confirm('Are you sure you want to delete this ticket? This action cannot be undone.')"
              >
                Delete
              </a>
            </div>
            <div class="text-xs text-gray-500">
              ID: {{ t.id }}
            </div>
          </div>
        </div>
      {% endfor %}
    </div>
  {% endif %}
</div>
{% endblock %}
